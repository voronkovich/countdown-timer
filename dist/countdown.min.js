(()=>{function G(z,k,q){let B={},F=Math.abs(k.getTime()-z.getTime()),C=Math.floor(F/1000);if(q.years)B.years=Math.floor(C/31536000),C%=31536000;if(q.months)B.months=Math.floor(C/2592000),C%=2592000;if(q.weeks)B.weeks=Math.floor(C/604800),C%=604800;if(q.days)B.days=Math.floor(C/86400),C%=86400;if(q.hours)B.hours=Math.floor(C/3600),C%=3600;if(q.minutes)B.minutes=Math.floor(C/60),C%=60;if(q.seconds)B.seconds=C;return B}function H(z){if(!z)return null;let k=new Date(z);if(!isNaN(k.getTime()))return k;return null}class E extends HTMLElement{#k=null;#C=null;#q=null;static define(z="countdown"){let k=`${z}-timer`;customElements.define(k,this)}constructor(){super()}connectedCallback(){if(!this.#k){if(this.#k=H(this.getAttribute("until")),!this.#k)throw new Error(`${this.tagName.toLowerCase()} requires a valid "until" attribute.`)}if(!this.#C){this.#C=Object.create(null);let z=this.tagName.toLowerCase().slice(0,-6);for(let k of["years","months","weeks","days","hours","minutes","seconds"]){let q=this.querySelector(`${z}-${k}`);if(q)this.#C[k]={el:q,padZeros:+q.getAttribute("pad-zeros")}}}this.#B(),this.#E()}disconnectedCallback(){this.#z()}#E(){if(!this.#q)this.#q=setInterval(()=>this.#B(),1000)}#z(){if(this.#q)clearInterval(this.#q),this.#q=null}#B(){let z=new Date,k={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0};if(z>=this.#k)this.#G();else k=G(z,this.#k,this.#C);this.#F(k)}#F(z){let k=!0;for(let q of Object.keys(this.#C)){let{el:B,padZeros:F}=this.#C[q],C=z[q].toString().padStart(F,"0");if(C!=B.textContent)B.textContent=C;if(k&&z[q]===0)B.setAttribute("finished","");else B.removeAttribute("finished"),k=!1}}#G(){this.#z(),this.setAttribute("finished","")}}E.define();})();
